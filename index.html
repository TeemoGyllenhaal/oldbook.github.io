<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sách Cũ 2Hand</title>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel để dịch JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Ẩn thanh cuộn xấu xí nhưng vẫn cuộn được */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* --- THAY ĐỔI 1: Thêm Animation cho dropdown --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.2s ease-out;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        // --- ĐỊNH NGHĨA ICON (Thay thế cho import lucide-react) ---
        const IconWrapper = ({ children, className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                {children}
            </svg>
        );

        const ShoppingCart = (props) => <IconWrapper {...props}><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></IconWrapper>;
        const Search = (props) => <IconWrapper {...props}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></IconWrapper>;
        const Star = (props) => <IconWrapper {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconWrapper>;
        const Filter = (props) => <IconWrapper {...props}><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></IconWrapper>;
        const ChevronRight = (props) => <IconWrapper {...props}><path d="m9 18 6-6-6-6"/></IconWrapper>;
        const MapPin = (props) => <IconWrapper {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconWrapper>;
        const Truck = (props) => <IconWrapper {...props}><path d="M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11"/><path d="M14 9h4l4 4v4c0 .6-.4 1-1 1h-2"/><circle cx="7" cy="18" r="2"/><path d="M15 18H9"/><circle cx="17" cy="18" r="2"/></IconWrapper>;
        const ShieldCheck = (props) => <IconWrapper {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/></IconWrapper>;

        // --- THAY ĐỔI 2: Thêm Icon ChevronDown ---
        const ChevronDown = (props) => <IconWrapper {...props}><path d="m6 9 6 6 6-6"/></IconWrapper>;
        // --- ỨNG DỤNG CHÍNH ---
        const { useState } = React;

        const OldBookStore = () => {
            const [cart, setCart] = useState([]);
            const [view, setView] = useState('home'); // home, detail, cart
            const [selectedProduct, setSelectedProduct] = useState(null);
            const [searchQuery, setSearchQuery] = useState('');
            const [categoryFilter, setCategoryFilter] = useState('All');

            // Dữ liệu giả lập
            const products = [
                { id: 1, title: 'Nhà Giả Kim (Cũ - 90%)', price: 45000, originalPrice: 79000, sold: 1200, location: 'Hà Nội', image: 'https://images.unsplash.com/photo-1544947950-fa07a98d237f?auto=format&fit=crop&q=80&w=300&h=300', category: 'Văn học', rating: 4.8 },
                { id: 2, title: 'Đắc Nhân Tâm (Cũ - 85%)', price: 35000, originalPrice: 86000, sold: 8500, location: 'TP. HCM', image: 'https://images.unsplash.com/photo-1589829085413-56de8ae18c73?auto=format&fit=crop&q=80&w=300&h=300', category: 'Kỹ năng', rating: 4.9 },
                { id: 3, title: 'Giáo trình Kinh tế Vi mô (Cũ)', price: 20000, originalPrice: 120000, sold: 400, location: 'Đà Nẵng', image: 'https://images.unsplash.com/photo-1532012197267-da84d127e765?auto=format&fit=crop&q=80&w=300&h=300', category: 'Giáo trình', rating: 4.5 },
                { id: 4, title: 'Harry Potter trọn bộ (Like New)', price: 950000, originalPrice: 1500000, sold: 50, location: 'Hà Nội', image: 'https://images.unsplash.com/photo-1610466024868-90d350d74b64?auto=format&fit=crop&q=80&w=300&h=300', category: 'Văn học', rating: 5.0 },
                { id: 5, title: 'Tuổi Trẻ Đáng Giá Bao Nhiêu', price: 40000, originalPrice: 80000, sold: 3200, location: 'TP. HCM', image: 'https://images.unsplash.com/photo-1555449377-6ac5e2e8e758?auto=format&fit=crop&q=80&w=300&h=300', category: 'Kỹ năng', rating: 4.7 },
                { id: 6, title: 'Giải tích 1 - ĐH Bách Khoa', price: 15000, originalPrice: 45000, sold: 150, location: 'Hà Nội', image: 'https://images.unsplash.com/photo-1509228468518-180dd4864904?auto=format&fit=crop&q=80&w=300&h=300', category: 'Giáo trình', rating: 4.2 },
                { id: 7, title: 'Doraemon tập 1-10 (Cũ)', price: 50000, originalPrice: 180000, sold: 500, location: 'Cần Thơ', image: 'https://images.unsplash.com/photo-1612533724368-243224b7a0d6?auto=format&fit=crop&q=80&w=300&h=300', category: 'Truyện tranh', rating: 4.9 },
                { id: 8, title: 'Cha Giàu Cha Nghèo (Cũ)', price: 55000, originalPrice: 110000, sold: 2100, location: 'TP. HCM', image: 'https://images.unsplash.com/photo-1550399105-c4db5fb85c18?auto=format&fit=crop&q=80&w=300&h=300', category: 'Kinh tế', rating: 4.6 },
            ];

            const categories = ['All', 'Văn học', 'Giáo trình', 'Truyện tranh', 'Kỹ năng', 'Kinh tế'];

            const formatCurrency = (amount) => {
                return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount);
            };

            const addToCart = (product) => {
                setCart([...cart, { ...product, quantity: 1 }]);
                alert('Đã thêm vào giỏ hàng!');
            };

            const handleProductClick = (product) => {
                setSelectedProduct(product);
                setView('detail');
            };

            const filteredProducts = products.filter(p => 
                (categoryFilter === 'All' || p.category === categoryFilter) &&
                p.title.toLowerCase().includes(searchQuery.toLowerCase())
            );

            const cartTotal = cart.reduce((total, item) => total + item.price * item.quantity, 0);

            // --- Components Con ---

            const Header = () => (
                <header className="sticky top-0 z-50 w-full bg-[#ee4d2d] text-white shadow-md">
                    <div className="container mx-auto px-4 py-3">
                        <div className="hidden md:flex justify-between text-xs mb-2 opacity-90">
                            <div className="flex space-x-4">
                                <span>Kênh Người Bán</span>
                                <span>Tải ứng dụng</span>
                                <span>Kết nối</span>
                            </div>
                            {/* --- THAY ĐỔI 3: Cập nhật menu Hỗ trợ với Dropdown --- */}
                            <div className="flex space-x-4 items-center">
                                <span className="cursor-pointer hover:opacity-80">Thông báo</span>
                                
                                {/* START DROPDOWN */}
                                <div className="group relative cursor-pointer flex items-center gap-1">
                                    <span className="hover:opacity-80">Hỗ trợ</span>
                                    <ChevronDown className="h-3 w-3" />
                                    
                                    {/* Dropdown Menu - Hiện khi Hover */}
                                    <div className="hidden group-hover:block absolute top-full right-0 pt-2 w-48 animate-fadeIn text-black z-50">
                                        <div className="bg-white shadow-lg rounded-sm border border-gray-100 overflow-hidden">
                                            <div className="py-1">
                                                <div className="px-4 py-2 hover:bg-gray-50 hover:text-[#ee4d2d] cursor-pointer transition-colors text-sm">Trung tâm trợ giúp</div>
                                                <div className="px-4 py-2 hover:bg-gray-50 hover:text-[#ee4d2d] cursor-pointer transition-colors text-sm">Quy định Shopee</div>
                                                <div className="px-4 py-2 hover:bg-gray-50 hover:text-[#ee4d2d] cursor-pointer transition-colors text-sm">Điều khoản</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {/* END DROPDOWN */}
                            <div className="flex space-x-4">
                                <span>Thông báo</span>
                                <span>Hỗ trợ</span>
                                <span className="font-bold cursor-pointer">Đăng ký</span>
                                <span className="font-bold cursor-pointer">Đăng nhập</span>
                            </div>
                        </div>
                    </div>
                        <div className="flex items-center gap-4 md:gap-8">
                            <div className="flex items-center gap-2 cursor-pointer" onClick={() => setView('home')}>
                                <div className="p-1 bg-white rounded">
                                    <ShoppingCart className="h-6 w-6 text-[#ee4d2d]" />
                                </div>
                                <span className="text-xl md:text-2xl font-bold tracking-tighter">SáchCũ247</span>
                            </div>

                            <div className="flex-1 relative">
                                <input 
                                    type="text" 
                                    placeholder="Tìm sách cũ..." 
                                    className="w-full py-2 px-3 rounded-md text-black focus:outline-none shadow-sm"
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                />
                                <button className="absolute right-1 top-1 bg-[#fb5533] p-1.5 rounded text-white hover:brightness-110">
                                    <Search className="h-4 w-4" />
                                </button>
                            </div>

                            <div className="relative cursor-pointer" onClick={() => setView('cart')}>
                                <ShoppingCart className="h-7 w-7" />
                                {cart.length > 0 && (
                                    <span className="absolute -top-2 -right-2 bg-white text-[#ee4d2d] text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center border border-[#ee4d2d]">
                                        {cart.length}
                                    </span>
                                )}
                            </div>
                        </div>
                    </div>
                </header>
            );

            const Banner = () => (
                <div className="bg-white mb-4">
                    <div className="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-1 md:gap-2 p-4">
                        <div className="md:col-span-2 h-40 md:h-60 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-lg flex items-center justify-center text-white relative overflow-hidden shadow-sm">
                            <div className="absolute inset-0 bg-black opacity-10"></div>
                            <div className="z-10 text-center">
                                <h2 className="text-2xl md:text-4xl font-bold mb-2">XẢ KHO SÁCH CŨ</h2>
                                <p className="text-sm md:text-lg">Giảm giá lên đến 70%</p>
                                <button className="mt-2 bg-white text-orange-500 px-4 py-1 rounded shadow text-sm font-bold">Mua Ngay</button>
                            </div>
                        </div>
                        <div className="hidden md:flex flex-col gap-2 h-60">
                            <div className="h-full bg-green-100 rounded-lg flex items-center justify-center text-green-600 font-bold text-sm">
                                Miễn phí vận chuyển
                            </div>
                            <div className="h-full bg-red-100 rounded-lg flex items-center justify-center text-red-600 font-bold text-sm">
                                Hot Deal
                            </div>
                        </div>
                    </div>
                </div>
            );

const CategoryBar = () => (
                <div className="bg-white py-3 shadow-sm mb-4 sticky top-[70px] z-40">
                    <div className="container mx-auto px-4 flex items-center gap-4">
                        <span className="text-sm text-gray-500 font-medium">Sắp xếp theo:</span>
                        
                        {/* DROPDOWN DANH MỤC */}
                        <div className="group relative">
                            {/* Nút bấm hiển thị danh mục đang chọn */}
                            <button className="flex items-center justify-between gap-3 bg-white border border-gray-300 px-4 py-2 rounded-sm text-sm min-w-[220px] hover:border-[#ee4d2d] transition-colors">
                                <div className="flex items-center gap-2">
                                    <Filter className="h-4 w-4 text-gray-500" />
                                    <span className={`font-medium ${categoryFilter !== 'All' ? 'text-[#ee4d2d]' : 'text-gray-700'}`}>
                                        {categoryFilter === 'All' ? 'Tất cả danh mục' : categoryFilter}
                                    </span>
                                </div>
                                <ChevronDown className="h-4 w-4 text-gray-400 group-hover:rotate-180 transition-transform duration-200" />
                            </button>

                            {/* Danh sách xổ xuống (Dropdown List) */}
                            <div className="hidden group-hover:block absolute top-full left-0 w-full bg-white shadow-lg border border-gray-100 rounded-sm mt-1 py-1 z-50 animate-fadeIn">
                                {categories.map((cat, idx) => (
                                    <div 
                                        key={idx}
                                        onClick={() => setCategoryFilter(cat)}
                                        className={`px-4 py-2.5 text-sm cursor-pointer hover:bg-gray-50 hover:text-[#ee4d2d] transition-colors flex justify-between items-center ${categoryFilter === cat ? 'text-[#ee4d2d] font-bold bg-orange-50' : 'text-gray-700'}`}
                                    >
                                        <span>{cat === 'All' ? 'Tất cả' : cat}</span>
                                        {/* Hiện dấu tích nếu đang chọn */}
                                        {categoryFilter === cat && <div className="h-1.5 w-1.5 rounded-full bg-[#ee4d2d]"></div>}
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Hiển thị thêm breadcrumb nhỏ (tùy chọn) để người dùng biết đang ở đâu */}
                        {categoryFilter !== 'All' && (
                            <button 
                                onClick={() => setCategoryFilter('All')}
                                className="text-xs text-red-500 hover:underline flex items-center gap-1"
                            >
                                (Xóa lọc)
                            </button>
                        )}
                    </div>
                </div>
            );

            const ProductCard = ({ product }) => (
                <div 
                    className="bg-white border border-gray-100 hover:border-[#ee4d2d] hover:shadow-lg transition-all duration-200 cursor-pointer flex flex-col h-full relative group"
                    onClick={() => handleProductClick(product)}
                >
                    <div className="absolute top-0 right-0 bg-yellow-400 text-white text-xs font-bold px-1 py-0.5 z-10">
                        -{Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100)}%
                    </div>
                    
                    <div className="aspect-square w-full overflow-hidden bg-gray-200">
                        <img src={product.image} alt={product.title} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
                    </div>

                    <div className="p-2 flex flex-col flex-1">
                        <h3 className="text-xs md:text-sm line-clamp-2 mb-1 min-h-[40px] text-gray-800">{product.title}</h3>
                        
                        <div className="flex gap-1 mb-2">
                            <span className="text-[10px] border border-[#ee4d2d] text-[#ee4d2d] px-0.5 rounded">Rẻ vô địch</span>
                        </div>

                        <div className="mt-auto">
                            <div className="flex items-baseline gap-1 flex-wrap">
                                <span className="text-[#ee4d2d] font-bold text-sm md:text-base">{formatCurrency(product.price)}</span>
                                <span className="text-gray-400 text-xs line-through">{formatCurrency(product.originalPrice)}</span>
                            </div>
                            
                            <div className="flex items-center justify-between mt-2 text-[10px] md:text-xs text-gray-500">
                                <div className="flex items-center text-yellow-400">
                                    <Star className="h-3 w-3 fill-current" />
                                    <span className="ml-0.5 text-gray-600">{product.rating}</span>
                                </div>
                                <span>Đã bán {product.sold >= 1000 ? (product.sold/1000).toFixed(1) + 'k' : product.sold}</span>
                            </div>
                            
                            <div className="text-[10px] text-gray-400 mt-1 flex items-center justify-end">
                                <span>{product.location}</span>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const ProductDetail = () => (
                <div className="container mx-auto px-4 py-4 bg-gray-50 min-h-screen">
                    <div className="flex items-center text-sm text-gray-500 mb-4 gap-2">
                        <span className="cursor-pointer" onClick={() => setView('home')}>Trang chủ</span>
                        <ChevronRight className="h-4 w-4" />
                        <span>{selectedProduct.category}</span>
                        <ChevronRight className="h-4 w-4" />
                        <span className="truncate">{selectedProduct.title}</span>
                    </div>

                    <div className="bg-white rounded shadow-sm p-4 md:p-6 grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div className="space-y-4">
                            <div className="aspect-square bg-gray-200 w-full overflow-hidden rounded border">
                                <img src={selectedProduct.image} alt={selectedProduct.title} className="w-full h-full object-cover" />
                            </div>
                            <div className="grid grid-cols-4 gap-2">
                                {[1,2,3,4].map(i => (
                                    <div key={i} className="aspect-square bg-gray-100 border hover:border-[#ee4d2d] cursor-pointer">
                                        <img src={selectedProduct.image} alt="" className="w-full h-full object-cover opacity-80" />
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="flex flex-col">
                            <h1 className="text-xl md:text-2xl font-medium mb-2">{selectedProduct.title}</h1>
                            
                            <div className="flex items-center gap-4 text-sm text-gray-500 mb-4 divide-x">
                                <div className="flex items-center gap-1 text-[#ee4d2d] border-b border-[#ee4d2d] pb-0.5">
                                    <span className="underline font-bold">{selectedProduct.rating}</span>
                                    <Star className="h-4 w-4 fill-current" />
                                </div>
                                <div className="pl-4">
                                    <span className="underline font-bold text-black">{selectedProduct.sold}</span> Đã bán
                                </div>
                            </div>

                            <div className="bg-gray-50 p-4 mb-6">
                                <div className="flex items-center gap-3">
                                    <span className="text-gray-400 line-through text-sm">{formatCurrency(selectedProduct.originalPrice)}</span>
                                    <span className="text-[#ee4d2d] text-3xl font-medium">{formatCurrency(selectedProduct.price)}</span>
                                    <span className="bg-[#ee4d2d] text-white text-xs font-bold px-1 rounded-sm">GIẢM 40%</span>
                                </div>
                            </div>

                            <div className="space-y-6 mb-8 text-sm">
                                <div className="flex gap-4 items-center">
                                    <span className="text-gray-500 w-24">Vận chuyển</span>
                                    <div className="flex items-center gap-2">
                                        <Truck className="h-5 w-5 text-gray-600" />
                                        <span>Miễn phí vận chuyển</span>
                                    </div>
                                </div>
                                <div className="flex gap-4 items-center">
                                    <span className="text-gray-500 w-24">Tình trạng</span>
                                    <span className="text-gray-800 font-medium">Sách cũ (Độ mới 90%)</span>
                                </div>
                                <div className="flex gap-4 items-center">
                                    <span className="text-gray-500 w-24">Số lượng</span>
                                    <div className="flex border border-gray-300">
                                        <button className="px-3 py-1 border-r hover:bg-gray-50">-</button>
                                        <input type="text" value="1" className="w-12 text-center focus:outline-none" readOnly />
                                        <button className="px-3 py-1 border-l hover:bg-gray-50">+</button>
                                    </div>
                                    <span className="text-gray-400 text-xs">5 sản phẩm có sẵn</span>
                                </div>
                            </div>

                            <div className="flex gap-3 mt-auto">
                                <button 
                                    onClick={() => addToCart(selectedProduct)}
                                    className="flex-1 bg-[#ffeee8] border border-[#ee4d2d] text-[#ee4d2d] py-3 px-4 rounded-sm flex items-center justify-center gap-2 hover:bg-[#ffdcd3]"
                                >
                                    <ShoppingCart className="h-5 w-5" />
                                    Thêm Vào Giỏ Hàng
                                </button>
                                <button className="flex-1 bg-[#ee4d2d] text-white py-3 px-4 rounded-sm hover:opacity-90">
                                    Mua Ngay
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="bg-white rounded shadow-sm p-4 mt-4 flex items-center justify-between">
                        <div className="flex items-center gap-4">
                            <div className="w-16 h-16 rounded-full bg-gray-200 overflow-hidden border">
                                <img src="https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?auto=format&fit=crop&q=80&w=100" alt="Avatar" className="w-full h-full object-cover"/>
                            </div>
                            <div>
                                <h4 className="font-bold">Tiệm Sách Cũ Hà Nội</h4>
                                <p className="text-xs text-gray-500">Online 5 phút trước</p>
                                <div className="flex gap-2 mt-1">
                                    <button className="text-[#ee4d2d] border border-[#ee4d2d] bg-[#ffeee8] px-2 py-0.5 text-xs">Chat Ngay</button>
                                    <button className="text-gray-600 border px-2 py-0.5 text-xs">Xem Shop</button>
                                </div>
                            </div>
                        </div>
                        <div className="hidden md:grid grid-cols-3 gap-8 text-sm text-gray-500 border-l pl-8">
                            <div><span className="block text-gray-800">123</span>Sản phẩm</div>
                            <div><span className="block text-gray-800">4.9</span>Đánh giá</div>
                            <div><span className="block text-gray-800">100%</span>Phản hồi chat</div>
                        </div>
                    </div>
                </div>
            );

            const CartView = () => (
                <div className="container mx-auto px-4 py-6 bg-gray-50 min-h-screen">
                    <h2 className="text-xl font-bold mb-4">Giỏ Hàng</h2>
                    {cart.length === 0 ? (
                        <div className="text-center py-20 bg-white shadow-sm">
                            <div className="mb-4 inline-block p-4 bg-gray-100 rounded-full">
                                <ShoppingCart className="h-10 w-10 text-gray-400" />
                            </div>
                            <p className="text-gray-500">Giỏ hàng của bạn còn trống</p>
                            <button onClick={() => setView('home')} className="mt-4 bg-[#ee4d2d] text-white px-6 py-2 rounded uppercase text-sm font-bold">Mua Ngay</button>
                        </div>
                    ) : (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div className="lg:col-span-2 space-y-4">
                                {cart.map((item, index) => (
                                    <div key={index} className="flex gap-4 bg-white p-4 shadow-sm rounded-sm">
                                        <div className="h-24 w-24 flex-shrink-0 bg-gray-200">
                                            <img src={item.image} alt={item.title} className="w-full h-full object-cover" />
                                        </div>
                                        <div className="flex-1 flex flex-col justify-between">
                                            <div>
                                                <h3 className="line-clamp-2 text-sm md:text-base font-medium">{item.title}</h3>
                                                <p className="text-xs text-gray-500 mt-1">Phân loại: Sách cũ</p>
                                            </div>
                                            <div className="flex justify-between items-center mt-2">
                                                <span className="text-[#ee4d2d] font-medium">{formatCurrency(item.price)}</span>
                                                <div className="flex border border-gray-300">
                                                    <button className="px-2 py-0.5 border-r bg-gray-50 text-gray-600">-</button>
                                                    <span className="px-2 py-0.5 text-sm w-8 text-center">{item.quantity}</span>
                                                    <button className="px-2 py-0.5 border-l bg-gray-50 text-gray-600">+</button>
                                                </div>
                                            </div>
                                        </div>
                                        <button 
                                            onClick={() => setCart(cart.filter((_, i) => i !== index))}
                                            className="text-red-500 text-sm h-fit hover:underline"
                                        >
                                            Xóa
                                        </button>
                                    </div>
                                ))}
                            </div>
                            
                            <div className="bg-white p-4 h-fit shadow-sm sticky top-20">
                                <div className="flex justify-between mb-2 text-sm text-gray-600">
                                    <span>Tạm tính</span>
                                    <span>{formatCurrency(cartTotal)}</span>
                                </div>
                                <div className="border-t pt-4 flex justify-between items-center mb-4">
                                    <span className="text-gray-800 font-medium">Tổng cộng</span>
                                    <span className="text-[#ee4d2d] text-xl font-bold">{formatCurrency(cartTotal)}</span>
                                </div>
                                <button className="w-full bg-[#ee4d2d] text-white py-3 font-bold uppercase rounded-sm hover:opacity-90 shadow-md">
                                    Mua Hàng ({cart.length})
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-100 font-sans text-gray-800">
                    <Header />
                    {view === 'home' && (
                        <>
                            <Banner />
                            <CategoryBar />
                            <div className="container mx-auto px-4 pb-8">
                                <div className="bg-white p-4 sticky top-[130px] z-30 shadow-sm mb-2 flex items-center gap-4">
                                    <span className="text-[#ee4d2d] font-bold border-b-2 border-[#ee4d2d] py-2">Gợi ý hôm nay</span>
                                </div>
                                <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-2 md:gap-3">
                                    {filteredProducts.map(product => (
                                        <ProductCard key={product.id} product={product} />
                                    ))}
                                </div>
                            </div>
                        </>
                    )}
                    {view === 'detail' && selectedProduct && <ProductDetail />}
                    {view === 'cart' && <CartView />}
                    
                    <footer className="bg-white border-t mt-8 pt-8 pb-12 text-sm text-gray-600">
                         <div className="container mx-auto px-4 text-center">
                             <p>© 2024 SáchCũ247</p>
                         </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<OldBookStore />);
    </script>
</body>
</html>