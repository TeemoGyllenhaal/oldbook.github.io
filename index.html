<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sách Cũ 2Hand</title>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel để dịch JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Ẩn thanh cuộn xấu xí nhưng vẫn cuộn được */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* --- THAY ĐỔI 1: Thêm Animation cho dropdown --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.2s ease-out;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        // --- ĐỊNH NGHĨA ICON (Thay thế cho import lucide-react) ---
        const IconWrapper = ({ children, className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                {children}
            </svg>
        );

        const ShoppingCart = (props) => <IconWrapper {...props}><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></IconWrapper>;
        const Search = (props) => <IconWrapper {...props}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></IconWrapper>;
        const Star = (props) => <IconWrapper {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconWrapper>;
        const Filter = (props) => <IconWrapper {...props}><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></IconWrapper>;
        const ChevronRight = (props) => <IconWrapper {...props}><path d="m9 18 6-6-6-6"/></IconWrapper>;
        const MapPin = (props) => <IconWrapper {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconWrapper>;
        const Truck = (props) => <IconWrapper {...props}><path d="M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11"/><path d="M14 9h4l4 4v4c0 .6-.4 1-1 1h-2"/><circle cx="7" cy="18" r="2"/><path d="M15 18H9"/><circle cx="17" cy="18" r="2"/></IconWrapper>;
        const ShieldCheck = (props) => <IconWrapper {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/></IconWrapper>;

        // --- THAY ĐỔI 2: Thêm Icon ChevronDown ---
        const ChevronDown = (props) => <IconWrapper {...props}><path d="m6 9 6 6 6-6"/></IconWrapper>;
        // --- ỨNG DỤNG CHÍNH ---
        const { useState } = React;

        const OldBookStore = () => {
            const [cart, setCart] = useState([]);
            const [view, setView] = useState('home'); // home, detail, cart
            const [selectedProduct, setSelectedProduct] = useState(null);
            const [searchQuery, setSearchQuery] = useState('');
            const [categoryFilter, setCategoryFilter] = useState('All');

            // Dữ liệu giả lập
            const products = [
                { id: 1, title: 'Nhà Giả Kim', price: 45000, originalPrice: 79000, sold: 1200, location: 'Hà Nội', image: 'https://th.bing.com/th/id/R.e874e5cccd4fd1d962c4e4b9060addc2?rik=xh6j8KueyO6A2A&pid=ImgRaw&r=0', category: 'Văn học', rating: 4.8 },
                { id: 2, title: 'Đắc Nhân Tâm', price: 35000, originalPrice: 86000, sold: 8500, location: 'TP. HCM', image: 'data:image/webp;base64,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', category: 'Kỹ năng', rating: 4.9 },
                { id: 3, title: 'Giáo trình Kinh tế Vi mô', price: 200000, originalPrice: 120000, sold: 400, location: 'Đà Nẵng', image: 'https://images.nxbbachkhoa.vn/Picture/2023/6/23/image-20230623085654503.jpg?fbclid=IwZXh0bgNhZW0CMTAAYnJpZBExQU5EaGQwYWlUR3RZR2pnWnNydGMGYXBwX2lkEDIyMjAzOTE3ODgyMDA4OTIAAR5t2gk_pu1wqA_IvAmMyMiXWOYh0DiPueSmGH2aIt2FhD9-ixeaJbwwbsI1dA_aem_OmlwBYfc0C_PLFXnAAigwA', category: 'Giáo trình', rating: 4.5 },
                { id: 4, title: 'Harry Potter trọn bộ (Like New)', price: 950000, originalPrice: 1500000, sold: 50, location: 'Hà Nội', image: 'https://th.bing.com/th/id/OIP.nFC1CRc9bPtTD0ZpStMH5gHaHa?w=180&h=180&c=7&r=0&o=7&pid=1.7&rm=3', category: 'Văn học', rating: 5.0 },
                { id: 5, title: 'Tuổi Trẻ Đáng Giá Bao Nhiêu', price: 40000, originalPrice: 80000, sold: 3200, location: 'TP. HCM', image: 'https://m.media-amazon.com/images/S/compressed.photo.goodreads.com/books/1495635816i/32521178.jpg', category: 'Kỹ năng', rating: 4.7 },
                { id: 6, title: 'Giải tích 1 - ĐH Bách Khoa', price: 15000, originalPrice: 45000, sold: 150, location: 'Hà Nội', image: 'https://tse4.mm.bing.net/th/id/OIP.hfwwFl3JZHEgkVPj4rh6CgHaKc?rs=1&pid=ImgDetMain&o=7&rm=3', category: 'Giáo trình', rating: 4.2 },
                { id: 7, title: 'Doraemon tập 1-10', price: 50000, originalPrice: 180000, sold: 500, location: 'Cần Thơ', image: 'https://product.hstatic.net/200000343865/product/1_ed055f5f67b541fb9f6ebe4f98cad804_2e624c13df1844809766bad152766d02_master.jpg?fbclid=IwY2xjawO8Xl1leHRuA2FlbQIxMABicmlkETFBTkRoZDBhaVRHdFlHamdac3J0YwZhcHBfaWQQMjIyMDM5MTc4ODIwMDg5MgABHnA3AT3VNB1dQBh0awLRAt2KhB-rynk9duQ5X2WllDallu3i90LX2qAHmzUz_aem_6EgsmEbctmtOcPon_zD2Qw', category: 'Truyện tranh', rating: 4.9 },
                { id: 8, title: 'Cha Giàu Cha Nghèo', price: 55000, originalPrice: 110000, sold: 2100, location: 'TP. HCM', image: 'https://danasmart.vn/wp-content/uploads/2024/07/Sach-Cha-Giau-Cha-Ngheo.jpg?fbclid=IwY2xjawO8YFxleHRuA2FlbQIxMABicmlkETFBTkRoZDBhaVRHdFlHamdac3J0YwZhcHBfaWQQMjIyMDM5MTc4ODIwMDg5MgABHm3aCT-m7XCoD8i8CYzIyJdY5iHQOI-55KYYfZoi3YWEP36LF5olvDBuwjV0_aem_OmlwBYfc0C_PLFXnAAigwA', category: 'Kinh tế', rating: 4.7 },
                { id: 9, title: 'Clean code', price: 55000, originalPrice: 110000, sold: 2100, location: 'TP. HCM', image: 'https://cdn1.fahasa.com/media/catalog/product/8/9/8936107813361.jpg', category: 'Giáo trình', rating: 4.6 },
                { id: 10, title: 'Giáo trình Maclenin', price: 100000, originalPrice: 110000, sold: 2100, location: 'TP. HCM', image: 'https://static.oreka.vn/800-800_efef7e23-3161-4624-8906-d410a85844e3.webp', category: 'Giáo trình', rating: 4 },
                { id: 11, title: 'Lịch sử tòa án nhân dân Việt Nam', price: 100000, originalPrice: 110000, sold: 2100, location: 'TP. HCM', image: 'https://scontent.fdad3-1.fna.fbcdn.net/v/t39.30808-6/605290260_1566815051025963_2083577116597366231_n.jpg?_nc_cat=111&ccb=1-7&_nc_sid=aa7b47&_nc_ohc=ZDoLOiHX7uEQ7kNvwEmDRs0&_nc_oc=Adm7acizu3ClQUlOwrWgEfabQSKCpvlvRaOXluFIq5noX3xuV-5zZS1wGg-dhH5lBkg&_nc_zt=23&_nc_ht=scontent.fdad3-1.fna&_nc_gid=UnOiIBv3nGe5YD7MNqoTNQ&oh=00_AflsrAI9JDJPPEDIiqcnd0zNZ2wg2RTdYH4UttGCTBHFdQ&oe=695564E3', category: 'Giáo trình', rating: 4.6 },
                { id: 12, title: 'Đôi mắt xứ Đoài', price: 100000, originalPrice: 110000, sold: 2100, location: 'TP. HCM', image: 'https://scontent.fdad3-1.fna.fbcdn.net/v/t39.30808-6/603770801_1273327644847795_5368457275927629101_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=103&ccb=1-7&_nc_sid=aa7b47&_nc_ohc=iPQf2BjYv74Q7kNvwHfhUsy&_nc_oc=AdmvpouKh3usPiVetkw3Fn0ucgIWqJFS1lHhBn3G7LFq4Bv79TvFX3gGDv0Dv7JmtNs&_nc_zt=23&_nc_ht=scontent.fdad3-1.fna&_nc_gid=KcFqpEY1HgdL0Xi75nd0jA&oh=00_AfkPkeivzFCoFDohoaC0IasBQT_5IFMX1GrU1PHta-aHmw&oe=69555B6C', category: 'Văn học', rating: 5 },
                { id: 13, title: 'Hướng dẫn phân tích dữ liệu (Tiếng Anh)', price: 100000, originalPrice: 110000, sold: 2100, location: 'TP. HCM', image: 'https://scontent.fdad3-1.fna.fbcdn.net/v/t39.30808-6/603067746_1885450075732343_6598084588624324788_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=110&ccb=1-7&_nc_sid=aa7b47&_nc_ohc=rQeIZMmsZ4oQ7kNvwFWttHS&_nc_oc=AdkZotnyL1ZBOIFLk3YikFrZT_WHerHr25TjfkfJcqokYNK3culGmbd7DG0d9BiJs3U&_nc_zt=23&_nc_ht=scontent.fdad3-1.fna&_nc_gid=Fjblxg82BJ253EG_xob7Bw&oh=00_AfmkU3E9W0fAhYdM6DPMaDaIVPgV1wsiOj8IPqYNDtDrHw&oe=69555854', category: 'Kỹ năng', rating: 4.1 },
                { id: 14, title: 'Reading in World Civilizations Volume 1 The Great Traditon', price: 300000, originalPrice: 500000, sold: 2100, location: 'TP. HCM', image: 'https://scontent.fdad3-1.fna.fbcdn.net/v/t39.30808-6/604739717_910303261502895_7228158583176223772_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=111&ccb=1-7&_nc_sid=aa7b47&_nc_ohc=2zly9waDidgQ7kNvwHOcwh3&_nc_oc=AdlfmTqSZt0HV1BGZuLOFhJdqXfoHto9a3M280_IS8D63WWFPCKisvbsWmvsy0igdxQ&_nc_zt=23&_nc_ht=scontent.fdad3-1.fna&_nc_gid=U0TWLLlEceczDjehDEWxGw&oh=00_AfmJoCk_60eTgmOrn2wbbUgAeoi_HYPdB9Vx4autNbhm4A&oe=69553B4F', category: 'Văn học', rating: 4.1 },
                { id: 15, title: 'Thể dục nhào lộn', price: 2000, originalPrice: 10000, sold: 2100, location: 'TP. HCM', image: 'https://static.oreka.vn/800-800_874e6c4c-46d7-4fcf-a756-e1cef28c484c?fbclid=IwZXh0bgNhZW0CMTAAYnJpZBExQU5EaGQwYWlUR3RZR2pnWnNydGMGYXBwX2lkEDIyMjAzOTE3ODgyMDA4OTIAAR4TEeGW1PmxXPoJmeC92t5cTb4NBWPyBxKcGti463WLC1FcDO7qaK3L3FXRnA_aem_UQWtsVb8Al-F1FxVZKJ2EQ', category: 'Giáo trình', rating: 4.1 },
                { id: 16, title: 'Lý sinh y học', price: 20000, originalPrice: 100000, sold: 2100, location: 'TP. HCM', image: 'https://images.xuatbanyhoc.vn/Picture/2023/10/16/image-20231016084107884.jpg?fbclid=IwY2xjawO8YYNleHRuA2FlbQIxMABicmlkETFBTkRoZDBhaVRHdFlHamdac3J0YwZhcHBfaWQQMjIyMDM5MTc4ODIwMDg5MgABHvUWX1hLY1gPcUCR9A01iZSdYMOhdCrmS8U02K5fT4ZoT6hKnKZ0OBIZ0kUt_aem_0POdFBgiK7auA5E6i1W0aw', category: 'Giáo trình', rating: 4.1 },
                { id: 17, title: 'Mưa đỏ', price: 20000, originalPrice: 100000, sold: 2100, location: 'TP. HCM', image: 'https://static.oreka.vn/800-800_66785c8b-c651-4167-8750-39a33f04052a?fbclid=IwY2xjawO8YgVleHRuA2FlbQIxMABicmlkETFBTkRoZDBhaVRHdFlHamdac3J0YwZhcHBfaWQQMjIyMDM5MTc4ODIwMDg5MgABHhMR4ZbU-bFc-gmZ4L3a3lxNvg0FY_IHEpwa2LjrdYsLUVwM7uporcvcVdGc_aem_UQWtsVb8Al-F1FxVZKJ2EQ', category: 'Văn học', rating: 4.1 },
            ];

            const categories = ['All', 'Văn học', 'Giáo trình', 'Truyện tranh', 'Kỹ năng', 'Kinh tế'];

            const formatCurrency = (amount) => {
                return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount);
            };

            const addToCart = (product) => {
                setCart([...cart, { ...product, quantity: 1 }]);
                alert('Đã thêm vào giỏ hàng!');
            };

            const handleProductClick = (product) => {
                setSelectedProduct(product);
                setView('detail');
            };

            const filteredProducts = products.filter(p => 
                (categoryFilter === 'All' || p.category === categoryFilter) &&
                p.title.toLowerCase().includes(searchQuery.toLowerCase())
            );

            const cartTotal = cart.reduce((total, item) => total + item.price * item.quantity, 0);

            // --- Components Con ---

            const Header = () => (
                <header className="sticky top-0 z-50 w-full bg-[#ee4d2d] text-white shadow-md">
                    <div className="container mx-auto px-4 py-3">
                        <div className="hidden md:flex justify-between text-xs mb-2 opacity-90">
                            <div className="flex space-x-4">
                                <span>Kênh Người Bán</span>
                                <span>Tải ứng dụng</span>
                                <span>Kết nối</span>
                            </div>
                            {/* --- THAY ĐỔI 3: Cập nhật menu Hỗ trợ với Dropdown --- */}
                            <div className="flex space-x-4 items-center">
                                <span className="cursor-pointer hover:opacity-80">Thông báo</span>
                                
                                {/* START DROPDOWN */}
                                <div className="group relative cursor-pointer flex items-center gap-1">
                                    <span className="hover:opacity-80">Hỗ trợ</span>
                                    <ChevronDown className="h-3 w-3" />
                                    
                                    {/* Dropdown Menu - Hiện khi Hover */}
                                    <div className="hidden group-hover:block absolute top-full right-0 pt-2 w-48 animate-fadeIn text-black z-50">
                                        <div className="bg-white shadow-lg rounded-sm border border-gray-100 overflow-hidden">
                                            <div className="py-1">
                                                <div className="px-4 py-2 hover:bg-gray-50 hover:text-[#ee4d2d] cursor-pointer transition-colors text-sm">Trung tâm trợ giúp</div>
                                                <div className="px-4 py-2 hover:bg-gray-50 hover:text-[#ee4d2d] cursor-pointer transition-colors text-sm">Quy định Shopee</div>
                                                <div className="px-4 py-2 hover:bg-gray-50 hover:text-[#ee4d2d] cursor-pointer transition-colors text-sm">Điều khoản</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {/* END DROPDOWN */}
                            <div className="flex space-x-4">
                                <span>Thông báo</span>
                                <span>Hỗ trợ</span>
                                <span className="font-bold cursor-pointer">Đăng ký</span>
                                <span className="font-bold cursor-pointer">Đăng nhập</span>
                            </div>
                        </div>
                    </div>
                        <div className="flex items-center gap-4 md:gap-8">
                            <div className="flex items-center gap-2 cursor-pointer" onClick={() => setView('home')}>
                                <div className="p-1 bg-white rounded">
                                    <ShoppingCart className="h-6 w-6 text-[#ee4d2d]" />
                                </div>
                                <span className="text-xl md:text-2xl font-bold tracking-tighter">Sách Cũ SV</span>
                            </div>

                            <div className="flex-1 relative">
                                <input 
                                    type="text" 
                                    placeholder="Tìm sách cũ..." 
                                    className="w-full py-2 px-3 rounded-md text-black focus:outline-none shadow-sm"
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                />
                                <button className="absolute right-1 top-1 bg-[#fb5533] p-1.5 rounded text-white hover:brightness-110">
                                    <Search className="h-4 w-4" />
                                </button>
                            </div>

                            <div className="relative cursor-pointer" onClick={() => setView('cart')}>
                                <ShoppingCart className="h-7 w-7" />
                                {cart.length > 0 && (
                                    <span className="absolute -top-2 -right-2 bg-white text-[#ee4d2d] text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center border border-[#ee4d2d]">
                                        {cart.length}
                                    </span>
                                )}
                            </div>
                        </div>
                    </div>
                </header>
            );

            const Banner = () => (
                <div className="bg-white mb-4">
                    <div className="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-1 md:gap-2 p-4">
                        <div className="md:col-span-2 h-40 md:h-60 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-lg flex items-center justify-center text-white relative overflow-hidden shadow-sm">
                            <div className="absolute inset-0 bg-black opacity-10"></div>
                            <div className="z-10 text-center">
                                <h2 className="text-2xl md:text-4xl font-bold mb-2">XẢ KHO SÁCH CŨ</h2>
                                <p className="text-sm md:text-lg">Giảm giá lên đến 70%</p>
                                <button className="mt-2 bg-white text-orange-500 px-4 py-1 rounded shadow text-sm font-bold">Mua Ngay</button>
                            </div>
                        </div>
                        <div className="hidden md:flex flex-col gap-2 h-60">
                            <div className="h-full bg-green-100 rounded-lg flex items-center justify-center text-green-600 font-bold text-sm relative overflow-hidden p-1">
                                <div className="absolute inset-0 flex items-center justify-center pointer-events-none" aria-hidden="true">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6" className="w-full h-full text-green-700 opacity-15 p-0.5">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
                                    </svg>
                                </div>
                                <span className="relative z-10">
                                    Miễn phí vận chuyển
                                </span>
                            </div>
                            <div className="h-full bg-red-100 rounded-lg flex items-center justify-center text-red-600 font-bold text-sm relative overflow-hidden p-1">
                                <div className="absolute inset-0 flex items-center justify-center pointer-events-none" aria-hidden="true">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6" className="w-full h-full text-red-700 opacity-15 p-0.5">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z" />
                                    </svg>
                                </div>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-4 h-4">
                                    <path fillRule="evenodd" d="M12.963 2.286a.75.75 0 00-1.071-.136 9.742 9.742 0 00-3.539 6.177A7.547 7.547 0 016.648 6.61a.75.75 0 00-1.152-.082A9 9 0 1015.68 4.534a7.46 7.46 0 01-2.717-2.248zM15.75 14.25a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" clipRule="evenodd" />
                                </svg>

                                <span className="relative z-10">
                                    Hot Deal
                                </span>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-4 h-4">
                                    <path fillRule="evenodd" d="M12.963 2.286a.75.75 0 00-1.071-.136 9.742 9.742 0 00-3.539 6.177A7.547 7.547 0 016.648 6.61a.75.75 0 00-1.152-.082A9 9 0 1015.68 4.534a7.46 7.46 0 01-2.717-2.248zM15.75 14.25a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" clipRule="evenodd" />
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            );

const CategoryBar = () => (
                <div className="bg-white py-3 shadow-sm mb-4 sticky top-[70px] z-40">
                    <div className="container mx-auto px-4 flex items-center gap-4">
                        <span className="text-sm text-gray-500 font-medium">Sắp xếp theo:</span>
                        
                        {/* DROPDOWN DANH MỤC */}
                        <div className="group relative">
                            {/* Nút bấm hiển thị danh mục đang chọn */}
                            <button className="flex items-center justify-between gap-3 bg-white border border-gray-300 px-4 py-2 rounded-sm text-sm min-w-[220px] hover:border-[#ee4d2d] transition-colors">
                                <div className="flex items-center gap-2">
                                    <Filter className="h-4 w-4 text-gray-500" />
                                    <span className={`font-medium ${categoryFilter !== 'All' ? 'text-[#ee4d2d]' : 'text-gray-700'}`}>
                                        {categoryFilter === 'All' ? 'Tất cả danh mục' : categoryFilter}
                                    </span>
                                </div>
                                <ChevronDown className="h-4 w-4 text-gray-400 group-hover:rotate-180 transition-transform duration-200" />
                            </button>

                            {/* Danh sách xổ xuống (Dropdown List) */}
                            <div className="hidden group-hover:block absolute top-full left-0 w-full bg-white shadow-lg border border-gray-100 rounded-sm mt-1 py-1 z-50 animate-fadeIn">
                                {categories.map((cat, idx) => (
                                    <div 
                                        key={idx}
                                        onClick={() => setCategoryFilter(cat)}
                                        className={`px-4 py-2.5 text-sm cursor-pointer hover:bg-gray-50 hover:text-[#ee4d2d] transition-colors flex justify-between items-center ${categoryFilter === cat ? 'text-[#ee4d2d] font-bold bg-orange-50' : 'text-gray-700'}`}
                                    >
                                        <span>{cat === 'All' ? 'Tất cả' : cat}</span>
                                        {/* Hiện dấu tích nếu đang chọn */}
                                        {categoryFilter === cat && <div className="h-1.5 w-1.5 rounded-full bg-[#ee4d2d]"></div>}
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Hiển thị thêm breadcrumb nhỏ (tùy chọn) để người dùng biết đang ở đâu */}
                        {categoryFilter !== 'All' && (
                            <button 
                                onClick={() => setCategoryFilter('All')}
                                className="text-xs text-red-500 hover:underline flex items-center gap-1"
                            >
                                (Xóa lọc)
                            </button>
                        )}
                    </div>
                </div>
            );

            const ProductCard = ({ product }) => (
                <div 
                    className="bg-white border border-gray-100 hover:border-[#ee4d2d] hover:shadow-lg transition-all duration-200 cursor-pointer flex flex-col h-full relative group"
                    onClick={() => handleProductClick(product)}
                >
                    <div className="absolute top-0 right-0 bg-yellow-400 text-white text-xs font-bold px-1 py-0.5 z-10">
                        -{Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100)}%
                    </div>
                    
                    <div className="aspect-square w-full overflow-hidden bg-gray-200">
                        <img src={product.image} alt={product.title} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
                    </div>

                    <div className="p-2 flex flex-col flex-1">
                        <h3 className="text-xs md:text-sm line-clamp-2 mb-1 min-h-[40px] text-gray-800">{product.title}</h3>
                        
                        <div className="flex gap-1 mb-2">
                            <span className="text-[10px] border border-[#ee4d2d] text-[#ee4d2d] px-0.5 rounded">Rẻ vô địch</span>
                        </div>

                        <div className="mt-auto">
                            <div className="flex items-baseline gap-1 flex-wrap">
                                <span className="text-[#ee4d2d] font-bold text-sm md:text-base">{formatCurrency(product.price)}</span>
                                <span className="text-gray-400 text-xs line-through">{formatCurrency(product.originalPrice)}</span>
                            </div>
                            
                            <div className="flex items-center justify-between mt-2 text-[10px] md:text-xs text-gray-500">
                                <div className="flex items-center text-yellow-400">
                                    <Star className="h-3 w-3 fill-current" />
                                    <span className="ml-0.5 text-gray-600">{product.rating}</span>
                                </div>
                                <span>Đã bán {product.sold >= 1000 ? (product.sold/1000).toFixed(1) + 'k' : product.sold}</span>
                            </div>
                            
                            <div className="text-[10px] text-gray-400 mt-1 flex items-center justify-end">
                                <span>{product.location}</span>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const ProductDetail = () => (
                <div className="container mx-auto px-4 py-4 bg-gray-50 min-h-screen">
                    <div className="flex items-center text-sm text-gray-500 mb-4 gap-2">
                        <span className="cursor-pointer" onClick={() => setView('home')}>Trang chủ</span>
                        <ChevronRight className="h-4 w-4" />
                        <span>{selectedProduct.category}</span>
                        <ChevronRight className="h-4 w-4" />
                        <span className="truncate">{selectedProduct.title}</span>
                    </div>

                    <div className="bg-white rounded shadow-sm p-4 md:p-6 grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div className="space-y-4">
                            <div className="aspect-square bg-gray-200 w-full overflow-hidden rounded border">
                                <img src={selectedProduct.image} alt={selectedProduct.title} className="w-full h-full object-cover" />
                            </div>
                            <div className="grid grid-cols-4 gap-2">
                                {[1,2,3,4].map(i => (
                                    <div key={i} className="aspect-square bg-gray-100 border hover:border-[#ee4d2d] cursor-pointer">
                                        <img src={selectedProduct.image} alt="" className="w-full h-full object-cover opacity-80" />
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="flex flex-col">
                            <h1 className="text-xl md:text-2xl font-medium mb-2">{selectedProduct.title}</h1>
                            
                            <div className="flex items-center gap-4 text-sm text-gray-500 mb-4 divide-x">
                                <div className="flex items-center gap-1 text-[#ee4d2d] border-b border-[#ee4d2d] pb-0.5">
                                    <span className="underline font-bold">{selectedProduct.rating}</span>
                                    <Star className="h-4 w-4 fill-current" />
                                </div>
                                <div className="pl-4">
                                    <span className="underline font-bold text-black">{selectedProduct.sold}</span> Đã bán
                                </div>
                            </div>

                            <div className="bg-gray-50 p-4 mb-6">
                                <div className="flex items-center gap-3">
                                    <span className="text-gray-400 line-through text-sm">{formatCurrency(selectedProduct.originalPrice)}</span>
                                    <span className="text-[#ee4d2d] text-3xl font-medium">{formatCurrency(selectedProduct.price)}</span>
                                    <span className="bg-[#ee4d2d] text-white text-xs font-bold px-1 rounded-sm">GIẢM 40%</span>
                                </div>
                            </div>

                            <div className="space-y-6 mb-8 text-sm">
                                <div className="flex gap-4 items-center">
                                    <span className="text-gray-500 w-24">Vận chuyển</span>
                                    <div className="flex items-center gap-2">
                                        <Truck className="h-5 w-5 text-gray-600" />
                                        <span>Miễn phí vận chuyển</span>
                                    </div>
                                </div>
                                <div className="flex gap-4 items-center">
                                    <span className="text-gray-500 w-24">Tình trạng</span>
                                    <span className="text-gray-800 font-medium">Sách cũ (Độ mới 90%)</span>
                                </div>
                                <div className="flex gap-4 items-center">
                                    <span className="text-gray-500 w-24">Số lượng</span>
                                    <div className="flex border border-gray-300">
                                        <button className="px-3 py-1 border-r hover:bg-gray-50">-</button>
                                        <input type="text" value="1" className="w-12 text-center focus:outline-none" readOnly />
                                        <button className="px-3 py-1 border-l hover:bg-gray-50">+</button>
                                    </div>
                                    <span className="text-gray-400 text-xs">5 sản phẩm có sẵn</span>
                                </div>
                            </div>

                            <div className="flex gap-3 mt-auto">
                                <button 
                                    onClick={() => addToCart(selectedProduct)}
                                    className="flex-1 bg-[#ffeee8] border border-[#ee4d2d] text-[#ee4d2d] py-3 px-4 rounded-sm flex items-center justify-center gap-2 hover:bg-[#ffdcd3]"
                                >
                                    <ShoppingCart className="h-5 w-5" />
                                    Thêm Vào Giỏ Hàng
                                </button>
                                <button className="flex-1 bg-[#ee4d2d] text-white py-3 px-4 rounded-sm hover:opacity-90">
                                    Mua Ngay
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="bg-white rounded shadow-sm p-4 mt-4 flex items-center justify-between">
                        <div className="flex items-center gap-4">
                            <div className="w-16 h-16 rounded-full bg-gray-200 overflow-hidden border">
                                <img src="https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?auto=format&fit=crop&q=80&w=100" alt="Avatar" className="w-full h-full object-cover"/>
                            </div>
                            <div>
                                <h4 className="font-bold">Tiệm Sách Cũ Hà Nội</h4>
                                <p className="text-xs text-gray-500">Online 5 phút trước</p>
                                <div className="flex gap-2 mt-1">
                                    <button className="text-[#ee4d2d] border border-[#ee4d2d] bg-[#ffeee8] px-2 py-0.5 text-xs">Chat Ngay</button>
                                    <button className="text-gray-600 border px-2 py-0.5 text-xs">Xem Shop</button>
                                </div>
                            </div>
                        </div>
                        <div className="hidden md:grid grid-cols-3 gap-8 text-sm text-gray-500 border-l pl-8">
                            <div><span className="block text-gray-800">123</span>Sản phẩm</div>
                            <div><span className="block text-gray-800">4.9</span>Đánh giá</div>
                            <div><span className="block text-gray-800">100%</span>Phản hồi chat</div>
                        </div>
                    </div>
                </div>
            );

            const CartView = () => (
                <div className="container mx-auto px-4 py-6 bg-gray-50 min-h-screen">
                    <h2 className="text-xl font-bold mb-4">Giỏ Hàng</h2>
                    {cart.length === 0 ? (
                        <div className="text-center py-20 bg-white shadow-sm">
                            <div className="mb-4 inline-block p-4 bg-gray-100 rounded-full">
                                <ShoppingCart className="h-10 w-10 text-gray-400" />
                            </div>
                            <p className="text-gray-500">Giỏ hàng của bạn còn trống</p>
                            <button onClick={() => setView('home')} className="mt-4 bg-[#ee4d2d] text-white px-6 py-2 rounded uppercase text-sm font-bold">Mua Ngay</button>
                        </div>
                    ) : (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div className="lg:col-span-2 space-y-4">
                                {cart.map((item, index) => (
                                    <div key={index} className="flex gap-4 bg-white p-4 shadow-sm rounded-sm">
                                        <div className="h-24 w-24 flex-shrink-0 bg-gray-200">
                                            <img src={item.image} alt={item.title} className="w-full h-full object-cover" />
                                        </div>
                                        <div className="flex-1 flex flex-col justify-between">
                                            <div>
                                                <h3 className="line-clamp-2 text-sm md:text-base font-medium">{item.title}</h3>
                                                <p className="text-xs text-gray-500 mt-1">Phân loại: Sách cũ</p>
                                            </div>
                                            <div className="flex justify-between items-center mt-2">
                                                <span className="text-[#ee4d2d] font-medium">{formatCurrency(item.price)}</span>
                                                <div className="flex border border-gray-300">
                                                    <button className="px-2 py-0.5 border-r bg-gray-50 text-gray-600">-</button>
                                                    <span className="px-2 py-0.5 text-sm w-8 text-center">{item.quantity}</span>
                                                    <button className="px-2 py-0.5 border-l bg-gray-50 text-gray-600">+</button>
                                                </div>
                                            </div>
                                        </div>
                                        <button 
                                            onClick={() => setCart(cart.filter((_, i) => i !== index))}
                                            className="text-red-500 text-sm h-fit hover:underline"
                                        >
                                            Xóa
                                        </button>
                                    </div>
                                ))}
                            </div>
                            
                            <div className="bg-white p-4 h-fit shadow-sm sticky top-20">
                                <div className="flex justify-between mb-2 text-sm text-gray-600">
                                    <span>Tạm tính</span>
                                    <span>{formatCurrency(cartTotal)}</span>
                                </div>
                                <div className="border-t pt-4 flex justify-between items-center mb-4">
                                    <span className="text-gray-800 font-medium">Tổng cộng</span>
                                    <span className="text-[#ee4d2d] text-xl font-bold">{formatCurrency(cartTotal)}</span>
                                </div>
                                <button className="w-full bg-[#ee4d2d] text-white py-3 font-bold uppercase rounded-sm hover:opacity-90 shadow-md">
                                    Mua Hàng ({cart.length})
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-100 font-sans text-gray-800">
                    <Header />
                    {view === 'home' && (
                        <>
                            <Banner />
                            <CategoryBar />
                            <div className="container mx-auto px-4 pb-8">
                                <div className="bg-white p-4 sticky top-[130px] z-30 shadow-sm mb-2 flex items-center gap-4">
                                    <span className="text-[#ee4d2d] font-bold border-b-2 border-[#ee4d2d] py-2">Gợi ý hôm nay</span>
                                </div>
                                <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-2 md:gap-3">
                                    {filteredProducts.map(product => (
                                        <ProductCard key={product.id} product={product} />
                                    ))}
                                </div>
                            </div>
                        </>
                    )}
                    {view === 'detail' && selectedProduct && <ProductDetail />}
                    {view === 'cart' && <CartView />}
                    
                    <footer className="bg-white border-t mt-8 pt-8 pb-12 text-sm text-gray-600">
                         <div className="container mx-auto px-4 text-center">
                             <p>© 2025 Sachcusv</p>
                         </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<OldBookStore />);
    </script>
</body>
</html>